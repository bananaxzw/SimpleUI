<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>event.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    
	<link href="http://simpleui.org/wp-content/themes/simpleui/css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
<div class="navbar navbar-fixed-top">
     
        <div class="container navbar-inner">
            <h1 class="nav-title">
                <a href="http://simpleui.org/">Simple <span class="nav-title-em">UI</span></a>
				<p>Simple UI library for the web & make web build quickly</p>
            </h1>
           
           <!-- <div class="navbar-col" title="切换显示咧">
                <a class="navbar-col2-demo ib" title="两栏" rel="two" href="javascript:;">
                    
                </a>
                <a class="navbar-col3-demo ib" title="三栏" rel="three" href="javascript:;">
                    
                </a>
            </div> -->
            <div class="navbar-search">
                <form action="http://simpleui.org/" method="get" id="searchForm">
                        <input type="text" placeholder="请输入搜索的关键字" name="s"/><button type="submit"></button>
                </form>
                      
            </div>
        </div>
      
</div>
<div class="nav-menu-container">
 <ul class="nav-menu"><li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-10"><a href="http://simpleui.org/category/guides/">指南</a></li>
<li id="menu-item-11" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11 current_page_item"><a href="http://simpleui.org/api">文档</a></li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51"><a href="http://simpleui.org/deploy">部署</a></li>
<li id="menu-item-50" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-50"><a href="http://github.com/WindyGex/SimpleUI">下载</a></li>
</ul> </div> 
	<div class="container">
    <div id="bd" class="yui3-g">
        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Simple.Attribute.html">Simple.Attribute</a></li>
            
                <li><a href="..&#x2F;classes/Simple.AutoComplete.html">Simple.AutoComplete</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Button.html">Simple.Button</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ButtonGroup.html">Simple.ButtonGroup</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ComboButton.html">Simple.ComboButton</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ContextMenu.html">Simple.ContextMenu</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DatePicker.html">Simple.DatePicker</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DatePickerBase.html">Simple.DatePickerBase</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Dialog.html">Simple.Dialog</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Drag.html">Simple.Drag</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DropDownButton.html">Simple.DropDownButton</a></li>
            
                <li><a href="..&#x2F;classes/Simple.EventTarget.html">Simple.EventTarget</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Menu.html">Simple.Menu</a></li>
            
                <li><a href="..&#x2F;classes/Simple.MenuItem.html">Simple.MenuItem</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Modal.html">Simple.Modal</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Pagination.html">Simple.Pagination</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Resize.html">Simple.Resize</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Selectable.html">Simple.Selectable</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Tip.html">Simple.Tip</a></li>
            
                <li><a href="..&#x2F;classes/Simple.TipBase.html">Simple.TipBase</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Transition.html">Simple.Transition</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Widget.html">Simple.Widget</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/attribute.html">attribute</a></li>
            
                <li><a href="..&#x2F;modules/declare.html">declare</a></li>
            
                <li><a href="..&#x2F;modules/event.html">event</a></li>
            
                <li><a href="..&#x2F;modules/transition.html">transition</a></li>
            
                <li><a href="..&#x2F;modules/ui.auto-complete.html">ui.auto-complete</a></li>
            
                <li><a href="..&#x2F;modules/ui.button.html">ui.button</a></li>
            
                <li><a href="..&#x2F;modules/ui.button-group.html">ui.button-group</a></li>
            
                <li><a href="..&#x2F;modules/ui.date-picker.html">ui.date-picker</a></li>
            
                <li><a href="..&#x2F;modules/ui.dialog.html">ui.dialog</a></li>
            
                <li><a href="..&#x2F;modules/ui.drag.html">ui.drag</a></li>
            
                <li><a href="..&#x2F;modules/ui.menu.html">ui.menu</a></li>
            
                <li><a href="..&#x2F;modules/ui.modal.html">ui.modal</a></li>
            
                <li><a href="..&#x2F;modules/ui.pagination.html">ui.pagination</a></li>
            
                <li><a href="..&#x2F;modules/ui.resize.html">ui.resize</a></li>
            
                <li><a href="..&#x2F;modules/ui.selectable.html">ui.selectable</a></li>
            
                <li><a href="..&#x2F;modules/ui.tool-tip.html">ui.tool-tip</a></li>
            
                <li><a href="..&#x2F;modules/widget.html">widget</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: event.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([&#x27;simple&#x27;, &#x27;declare&#x27;], function(S, declare){
    var aspect = (function(){
        var nextId = 0;
        function advise(dispatcher, type, advice, receiveArguments){
            var previous = dispatcher[type];
            var around = type == &quot;around&quot;;
            var signal;
            if (around) {
                var advised = advice(function(){
                    return previous.advice(this, arguments);
                });
                signal = {
                    remove: function(){
                        signal.cancelled = true;
                    },
                    advice: function(target, args){
                        return signal.cancelled ? previous.advice(target, args) : advised.apply(target, args);
                    }
                };
            }
            else {
                &#x2F;&#x2F; create the remove handler
                signal = {
                    remove: function(){
                        var previous = signal.previous;
                        var next = signal.next;
                        if (!next &amp;&amp; !previous) {
                            delete dispatcher[type];
                        }
                        else {
                            if (previous) {
                                previous.next = next;
                            }
                            else {
                                dispatcher[type] = next;
                            }
                            if (next) {
                                next.previous = previous;
                            }
                        }
                    },
                    id: nextId++,
                    advice: advice,
                    receiveArguments: receiveArguments
                };
            }
            if (previous &amp;&amp; !around) {
                if (type == &quot;after&quot;) {
                    &#x2F;&#x2F; add the listener to the end of the list
                    var next = previous;
                    while (next) {
                        previous = next;
                        next = next.next;
                    }
                    previous.next = signal;
                    signal.previous = previous;
                }
                else 
                    if (type == &quot;before&quot;) {
                        &#x2F;&#x2F; add to beginning
                        dispatcher[type] = signal;
                        signal.next = previous;
                        previous.previous = signal;
                    }
            }
            else {
                &#x2F;&#x2F; around or first one just replaces
                dispatcher[type] = signal;
            }
            return signal;
        }
        
        function aspect(type){
            return function(target, methodName, advice, receiveArguments){
                var existing = target[methodName], dispatcher;
                if (!existing || existing.target != target) {
                    &#x2F;&#x2F; no dispatcher in place
                    target[methodName] = dispatcher = function(){
                        var executionId = nextId;
                        &#x2F;&#x2F; before advice
                        var args = arguments;
                        var before = dispatcher.before;
                        while (before) {
                            args = before.advice.apply(this, args) || args;
                            before = before.next;
                        }
                        &#x2F;&#x2F; around advice
                        if (dispatcher.around) {
                            var results = dispatcher.around.advice(this, args);
                        }
                        &#x2F;&#x2F; after advice
                        var after = dispatcher.after;
                        while (after &amp;&amp; after.id &lt; executionId) {
                            results = after.receiveArguments ? after.advice.apply(this, args) || results : after.advice.call(this, results);
                            after = after.next;
                        }
                        return results;
                    };
                    if (existing) {
                        dispatcher.around = {
                            advice: function(target, args){
                                return existing.apply(target, args);
                            }
                        };
                    }
                    dispatcher.target = target;
                }
                var results = advise((dispatcher || existing), type, advice, receiveArguments);
                advice = null;
                return results;
            };
        }
        return {
            before: aspect(&quot;before&quot;),
            around: aspect(&quot;around&quot;),
            after: aspect(&quot;after&quot;)
        };
    })();
    
    S.aspect = aspect;
    &#x2F;**
     * 为SimpleUI提供基本的事件支持，简化事件操作流程，提升响应速度，
     * 并且针对SimpleUI的组件特性加入了对node节点的disabled嗅探
     *
     *  * 当该节点的的样式类中包含&#x60;disable&#x60;，则不会对该操作进行响应
     *  * 支持二级命名空间事件命名
     *  * 支持面向切面的事件编程,该类被设计为用于继承的基类。
     *
     * @module event
     * @class Simple.EventTarget
     *&#x2F;
    var Event = declare(&#x27;EventTarget&#x27;, {
        &#x2F;**
		 * 自定义事件
		 *     
		 *     listeners:{
		 *         change:$.noop
		 *     }
		 *     
		 *     this.trigger(&#x27;change&#x27;);
		 *     
		 * @type Object
		 * @property listeners
		 * @default null
		 *&#x2F;
		listeners:null,
        init: function(){
            this._events = {};
            &#x2F;&#x2F;add customize event support
			if(this.listeners){
				S.each(this.listeners,function(callback,event){
					this.on(event,callback);
				},this);
			}
        },
        &#x2F;**
         * 绑定一个事件，并且返回一个对象用于解绑该事件
         *
         *     var eventBinder = event.on(&#x27;test&#x27;,callback);
         *     eventBinder.off();
         *
         * @method on
         * @param  {String} type  事件的名称
         * @param  {Function} handle 该事件的回调函数
         * @return {Object} 用于对这个事件进行解绑操作
         *&#x2F;
        on: function(type, handle){
        
            var index, self = this, events = type.split(&#x27;&#x2F;&#x27;), eventPrefix, eventType, namespace, eventQueue;
            if (events.length &gt; 1) {
                eventPrefix = events[0];
                eventType = events[1];
            }
            else {
                eventType = events[0];
            }
            
            if (eventPrefix) {
            
                if (!this._events[eventPrefix]) {
                    namespace = this._events[eventPrefix] = {};
                }
                if (!this._events[eventPrefix]._meta) {
                    this._events[eventPrefix]._meta = [];
                }
                if (!this._events[eventPrefix][eventType]) {
                
                    eventQueue = this._events[eventPrefix][eventType] = [];
                    this._events[eventPrefix]._meta.push(handle);
                }
            }
            else {
                if (!this._events[eventType]) {
                    eventQueue = this._events[eventType] = [];
                }
                else {
                    eventQueue = this._events[eventType];
                }
            }
            
            index = eventQueue.push(handle);
            
            return {
                off: function(){
                    eventQueue.splice(index, 1);
                }
            }
            
        },
        &#x2F;**
         * 解除事件的绑定
         *
         *     var eventBinder = event.on(&#x27;test&#x27;,callback);
         *     event.off(&#x27;test&#x27;,callback)
         *
         * @method off
         * @param  {String} type  事件的名称
         * @param  {Function} handle 该事件的回调函数
         * @return {Boolean} 解绑成功返回true
         *&#x2F;
        off: function(type, handle){
            if (!type) {
                this._events = {};
                return true;
            }
            var index, events = type.split(&#x27;&#x2F;&#x27;), eventPrefix, eventType, eventQueue;
            
            if (events.length &gt; 1) {
                eventPrefix = events[0], eventType = events[1];
            }
            else {
                eventType = events[0];
            }
            
            if (eventPrefix) {
                if (!this._events[eventPrefix]) {
                    return true;
                }
                else {
                    if (!this._events[eventPrefix][eventType]) {
                        return true;
                    }
                    else {
                        eventQueue = this._events[eventPrefix][eventType];
                    }
                }
            }
            else {
                if (!this._events[eventType]) {
                    return true;
                }
                else {
                    eventQueue = this._events[eventType];
                }
            }
            
            for (var i = 0; i &lt; eventQueue.length; i++) {
                if (eventQueue[i] === handle) {
                    eventQueue.splice(i, 1);
                    break;
                }
            }
            
            return true;
            
        },
        &#x2F;**
         * 触发一个事件，可以使用该事件的命名空间来触发一组事件
         *
         *     var eventBinder = event.on(&#x27;test&#x27;,callback);
         *     event.trigger(&#x27;test&#x27;);
         *
         * @method trigger
         * @param  {String} type  事件的名称
         * @param  {Object} args 传入该事件回调的参数
         * @return {Boolean} 返回true
         *&#x2F;
        trigger: function(type, args){
        
            var index, events = type.split(&#x27;&#x2F;&#x27;), eventPrefix, eventType, eventQueue = [], eventResult = true;
            
            if (args &amp;&amp; args.node &amp;&amp; &#x2F;disable&#x2F;.test(args.node.attr(&#x27;class&#x27;))) {
                return false;
            }
            
            if (events.length &gt; 1) {
                eventPrefix = events[0], eventType = events[1];
            }
            else {
                eventType = events[0];
            }
            
            if (eventPrefix) {
                if (!this._events[eventPrefix]) {
                    return true;
                }
                eventQueue = this._events[eventPrefix][eventType] || [];
            }
            else {
                if (this._events[eventType]) {
                    if (this._events[eventType].length) {
                        eventQueue = this._events[eventType];
                    }
                    else {
                        if (this._events[eventType]._meta) {
                            eventQueue = this._events[eventType]._meta;
                        }
                    }
                }
                else {
                    return;
                }
            }
            
            for (var i = 0; i &lt; eventQueue.length; i++) {
                if (eventQueue[i].call(this, args) === false) {
                    eventResult = false;
                    break;
                };
                            }
            
            return eventResult;
        },
        &#x2F;**
         * 过滤一个方法，返回一个新的方法
         * @method aspect
         * @param  {Function} method 在过滤这个方法的时候需要执行的方法
         * @return {Object} 返回通知的类型方法
         *&#x2F;
        aspect: function(method){
            var self = this;
            return {
                before: function(advice, args){
                    return aspect.before(self, method, advice, args)
                },
                after: function(advice, args){
                    return aspect.after(self, method, advice, args)
                },
                around: function(advice, args){
                    return aspect.around(self, method, advice, args)
                }
            }
        }
    });
    
    return Event;
});






    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<div class="foot">
		The API build by YUIDOC
		Simple UI is released under MIT License and implements open technologies such as:HTML5,CSS3,JavaScript.
		<p>
		如果你想为SimpleUI贡献代码，请点击这里<a target="_blank" href="http://github.com/simpleui">SimpleUI At Github</a>
		</p>
        <div class="blog-info">
         WordPress和<a href="http://simpleui.org" target="_blank">SimpleUI</a>强力驱动--蓝面小生--2012
		 <script src="http://s9.cnzz.com/stat.php?id=4424795&web_id=4424795&show=pic1" language="JavaScript"></script>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
