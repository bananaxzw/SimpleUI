<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ui\tool-tip.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    
	<link href="http://simpleui.org/wp-content/themes/simpleui/css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
<div class="navbar navbar-fixed-top">
     
        <div class="container navbar-inner">
            <h1 class="nav-title">
                <a href="http://simpleui.org/">Simple <span class="nav-title-em">UI</span></a>
				<p>Simple UI library for the web & make web build quickly</p>
            </h1>
           
           <!-- <div class="navbar-col" title="切换显示咧">
                <a class="navbar-col2-demo ib" title="两栏" rel="two" href="javascript:;">
                    
                </a>
                <a class="navbar-col3-demo ib" title="三栏" rel="three" href="javascript:;">
                    
                </a>
            </div> -->
            <div class="navbar-search">
                <form action="http://simpleui.org/" method="get" id="searchForm">
                        <input type="text" placeholder="请输入搜索的关键字" name="s"/><button type="submit"></button>
                </form>
                      
            </div>
        </div>
      
</div>
<div class="nav-menu-container">
 <ul class="nav-menu"><li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-10"><a href="http://simpleui.org/category/guides/">指南</a></li>
<li id="menu-item-11" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11 current_page_item"><a href="http://simpleui.org/api">文档</a></li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51"><a href="http://simpleui.org/deploy">部署</a></li>
<li id="menu-item-50" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-50"><a href="http://github.com/WindyGex/SimpleUI">下载</a></li>
</ul> </div> 
	<div class="container">
    <div id="bd" class="yui3-g">
        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Simple.Attribute.html">Simple.Attribute</a></li>
            
                <li><a href="..&#x2F;classes/Simple.AutoComplete.html">Simple.AutoComplete</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Button.html">Simple.Button</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ButtonGroup.html">Simple.ButtonGroup</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ComboButton.html">Simple.ComboButton</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ContextMenu.html">Simple.ContextMenu</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DatePicker.html">Simple.DatePicker</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DatePickerBase.html">Simple.DatePickerBase</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Dialog.html">Simple.Dialog</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Drag.html">Simple.Drag</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DropDownButton.html">Simple.DropDownButton</a></li>
            
                <li><a href="..&#x2F;classes/Simple.EventTarget.html">Simple.EventTarget</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Menu.html">Simple.Menu</a></li>
            
                <li><a href="..&#x2F;classes/Simple.MenuItem.html">Simple.MenuItem</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Modal.html">Simple.Modal</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Pagination.html">Simple.Pagination</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Resize.html">Simple.Resize</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Selectable.html">Simple.Selectable</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Tip.html">Simple.Tip</a></li>
            
                <li><a href="..&#x2F;classes/Simple.TipBase.html">Simple.TipBase</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Transition.html">Simple.Transition</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Widget.html">Simple.Widget</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/attribute.html">attribute</a></li>
            
                <li><a href="..&#x2F;modules/declare.html">declare</a></li>
            
                <li><a href="..&#x2F;modules/event.html">event</a></li>
            
                <li><a href="..&#x2F;modules/transition.html">transition</a></li>
            
                <li><a href="..&#x2F;modules/ui.auto-complete.html">ui.auto-complete</a></li>
            
                <li><a href="..&#x2F;modules/ui.button.html">ui.button</a></li>
            
                <li><a href="..&#x2F;modules/ui.button-group.html">ui.button-group</a></li>
            
                <li><a href="..&#x2F;modules/ui.date-picker.html">ui.date-picker</a></li>
            
                <li><a href="..&#x2F;modules/ui.dialog.html">ui.dialog</a></li>
            
                <li><a href="..&#x2F;modules/ui.drag.html">ui.drag</a></li>
            
                <li><a href="..&#x2F;modules/ui.menu.html">ui.menu</a></li>
            
                <li><a href="..&#x2F;modules/ui.modal.html">ui.modal</a></li>
            
                <li><a href="..&#x2F;modules/ui.pagination.html">ui.pagination</a></li>
            
                <li><a href="..&#x2F;modules/ui.resize.html">ui.resize</a></li>
            
                <li><a href="..&#x2F;modules/ui.selectable.html">ui.selectable</a></li>
            
                <li><a href="..&#x2F;modules/ui.tool-tip.html">ui.tool-tip</a></li>
            
                <li><a href="..&#x2F;modules/widget.html">widget</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ui\tool-tip.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([&#x27;simple&#x27;, &#x27;declare&#x27;, &#x27;widget&#x27;, &#x27;ui&#x2F;dialog&#x27;], function(S, declare, Widget, Dialog){

    var $ = S.$, TipBase, ToolTip;
    
    &#x2F;**
     * 提示功能的基类,该类可以直接被实例化，通常用于新功能提示等
     * @class Simple.TipBase
     * @extends Simple.Dialog
     * @module ui.tool-tip
     *&#x2F;
    TipBase = declare(&#x27;TipBase&#x27;, Dialog, {
        &#x2F;**
         * 是否显示遮罩，默认是不应该显示遮罩的
         * @property modal
         * @type Boolean
         * @protected
         * @default false
         *&#x2F;
        modal: false,
        &#x2F;**
         * 不启用堆栈
         * @property stack
         * @type Boolean
         * @protected
         * @default false
         *&#x2F;
        stack: false,
        &#x2F;**
         * 默认不开启关闭按钮
         * @property handleTool
         * @type Array
         * @default false
         *&#x2F;
        handleTool: false,
        &#x2F;**
         * tip出现的参考节点
         * @property node
         * @type String
         * @default &#x27;&#x27;
         *&#x2F;
        node: &#x27;&#x27;,
        &#x2F;**
         * 提示的内容
         * @property content
         * @type String
         * @default &#x27;&#x27;
         *&#x2F;
        content: &#x27;&#x27;,
        &#x2F;**
         * 默认不显示提示的标题
         * @property title
         * @type String
         * @default false
         *&#x2F;
        title: false,
        &#x2F;**
         * 指定显示在node的位置
         * @property direction
         * @type String
         * @default bottom
         *&#x2F;
        direction: &#x27;bottom&#x27;,
        &#x2F;**
         * 提示的模版
         * @property template
         * @type String
         * @default &#x27;&#x27;
         *&#x2F;
        template: &#x27;&lt;div class=&quot;simple-tip-dialog&quot;&gt;&lt;div class=&quot;simple-dialog-arrow&quot; widgetpoint=&quot;dialogArrow&quot;&gt;&lt;&#x2F;div&gt;&lt;div widgetpoint=&quot;dialogContent&quot;&gt;&lt;&#x2F;div&gt;&lt;&#x2F;div&gt;&#x27;,
        &#x2F;**
         * 渲染提示组件
         * @method renderUI
         *&#x2F;
        renderUI: function(){
            this._renderUI();
            this.setMeta(this.node, this.direction);
        },
        &#x2F;**
         * 根据提供的节点与相对节点的方向设置组件的一些基本信息
         * @method setMeta
         * @param {Object} node 设置信息的节点
         * @param {String} direction 设置节点的方向
         *&#x2F;
        setMeta: function(node, direction){
            this._setMeta(node, direction);
            this._fixPosition(node, direction);
        },
        &#x2F;**
         * 根据提供的节点与相对节点的方向设置组件的一些基本信息
         * @method _setMeta
         * @private
         * @param {Object} triggerNode 设置信息的节点
         * @param {String} direction 设置节点的方向
         *&#x2F;
        _setMeta: function(triggerNode, direction){
        
            var meta = this._getMetaByDirection(direction);
            
            this.dialogArrow.removeClass().addClass(&#x27;simple-dialog-arrow &#x27; + meta.arrowClassName);
            
            this.setPosition(this.el, triggerNode, meta.position, meta.offset);
            
        },
        &#x2F;**
         * 得到节点的位置信息
         * @method _getMetaByDirection
         * @private
         * @param {String} direction 设置节点的方向
         *&#x2F;
        _getMetaByDirection: function(direction){
        
            var arrowClassName, position, offset, width = this.dialogArrow.width(), height = this.dialogArrow.height();
            
            switch (direction) {
                case &#x27;top&#x27;:
                    arrowClassName = &#x27;simple-dialog-arrow-bottom&#x27;;
                    position = &#x27;lb lt&#x27;;
                    offset = &#x27;0 -&#x27; + height;
                    break;
                case &#x27;left&#x27;:
                    arrowClassName = &#x27;simple-dialog-arrow-right&#x27;;
                    position = &#x27;rt lt&#x27;;
                    offset = &#x27;-&#x27; + width + &#x27; 0&#x27;;
                    break;
                case &#x27;bottom&#x27;:
                    arrowClassName = &#x27;simple-dialog-arrow-top&#x27;;
                    position = &#x27;lt lb&#x27;;
                    offset = &#x27;0 &#x27; + height;
                    break;
                case &#x27;right&#x27;:
                    arrowClassName = &#x27;simple-dialog-arrow-left&#x27;;
                    position = &#x27;lt rt&#x27;;
                    offset = width + &#x27; 0&#x27;;
                    break;
                default:
                    arrowClassName = &#x27;simple-dialog-arrow-top&#x27;;
                    position = &#x27;lb lt&#x27;;
            }
            
            return {
                arrowClassName: arrowClassName,
                position: position,
                offset: offset
            }
            
        },
        &#x2F;**
         * 设定节点的位置
         * @method _fixPosition
         * @private
         * @param {Object} triggerNode 设置信息的节点
         * @param {String} direction 设置节点的方向
         *&#x2F;
        _fixPosition: function(triggerNode, direction){
        
            switch (direction) {
            
                case &#x27;top&#x27;:
                case &#x27;bottom&#x27;:
                    
                    if (!S.isFitVertical(this.el)) {
                        if (direction == &#x27;top&#x27;) {
                            direction = &#x27;bottom&#x27;;
                        }
                        else {
                            direction = &#x27;top&#x27;;
                        }
                    }
                    break;
                    
                case &#x27;left&#x27;:
                case &#x27;right&#x27;:
                    
                    if (!S.isFitHorizontal(this.el)) {
                        if (direction == &#x27;left&#x27;) {
                            direction = &#x27;right&#x27;;
                        }
                        else {
                            direction = &#x27;left&#x27;;
                        }
                    }
                    
            }
            
            this._setMeta(triggerNode, direction);
        }
    });
    
    var _toolTipInc;
    S.showToolTip = function(node, content){
        if (!_toolTipInc) {
            _toolTipInc = new TipBase({
                node: node,
                className: &#x27;simple-tool-tip&#x27;,
                container: null
            });
        }
        _toolTipInc.show();
        _toolTipInc.set(&#x27;content&#x27;, content);
        _toolTipInc.setMeta(node, &#x27;bottom&#x27;);
        
        return _toolTipInc;
    }
    
    S.hideToolTip = function(node){
        _toolTipInc &amp;&amp; _toolTipInc.hide();
        
    }
    &#x2F;**
     * 提示功能的类，会共享一个dom元素。
     * @class Simple.Tip
     * @extends Simple.Widget
     *&#x2F;
    ToolTip = declare(&#x27;ToolTip&#x27;, Widget, {
        &#x2F;**
         * 是否允许悬浮在tip上
         * @property allowTipHover
         * @type Boolean
         * @default false
         *&#x2F;
        allowTipHover: false,
        &#x2F;**
         * tip的内容
         * @property content
         * @type Function | String
         * @default &#x27;&#x27;
         *&#x2F;
        content: &#x27;&#x27;,
        &#x2F;**
         * 显示Tip的节点
         * @property node
         * @type  String
         * @default &#x27;&#x27;
         *&#x2F;
        node: &#x27;&#x27;,
        &#x2F;**
         * 触发tip的事件，可选值有&#x27;hover&amp;click&#x27;
         * @property triggerEvent
         * @type String
         * @default &#x27;hover&#x27;
         *&#x2F;
        triggerEvent: &#x27;hover&#x27;,
        &#x2F;**
         * 初始化tip组件的事件
         * @method initBaseEvents
         *&#x2F;
        initBaseEvents: function(){
            if (this.triggerEvent == &#x27;hover&#x27;) {
            
                this.node.on({
                    &#x27;mouseover&#x27;: $.proxy(this._onMouseOver, this),
                    &#x27;mouseout&#x27;: $.proxy(this._onMouseOut, this)
                });
                
            }
            else 
                if (this.triggerEvent == &#x27;click&#x27;) {
                
                    this.node.on(&#x27;click&#x27;, $.proxy(this._onClick, this));
                    
                    $(document).on(&#x27;click&#x27;, this.hide);
                }
            
        },
        &#x2F;**
         * 为该tip组件绑定事件
         * @method _bindUI
         * @private
         *&#x2F;
        _bindUI: function(){
        
            if (this.allowTipHover) {
            
                this.el.off(&#x27;.tooltip&#x27;).on({
                    &#x27;mouseover.tooltip&#x27;: $.proxy(this._onElMouseOver, this),
                    &#x27;mouseout.tooltip&#x27;: $.proxy(this._onElMouseOut, this)
                });
                
            }
        },
        &#x2F;**
         * 设置tip的内容
         * @method _setterContent
         * @private
         *&#x2F;
        _setterContent: function(content){
            if (this.toolTipInc) {
                this.toolTipInc.set(&#x27;content&#x27;, content);
            }
            return content;
        },
        &#x2F;**
         * 为el绑定点击事件
         * @method _onClick
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onClick: function(e){
            var triggerNode = $(e.currentTarget);
            this._showToolTip(triggerNode);
            return false;
        },
        &#x2F;**
         * 显示tip的方法
         * @method _showToolTip
         * @param triggerNode {HTMLElement} 触发tip的dom元素
         * @private
         *&#x2F;
        _showToolTip: function(triggerNode){
        
            if (!this.content) {
                this._currentContent = triggerNode.attr(&#x27;data-title&#x27;);
                
            }
            else 
                if (typeof this.content === &#x27;function&#x27;) {
                    this._currentContent = this.content.call(triggerNode)
                }
                else {
                    this._currentContent = this.content;
                }
            if (!this._currentContent) {
                throw new Error(&#x27;please give the tool-tip a content!&#x27;);
            }
            this.toolTipInc = S.showToolTip(triggerNode, this._currentContent);
            this.el = this.toolTipInc.el;
            this._bindUI();
            
            
        },
        &#x2F;**
         * tip的悬浮事件操作
         * @method _onMouseOver
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onMouseOver: function(e){
            var self = this;
            this._showTimeOut = setTimeout(function(){
                var triggerNode = $(e.currentTarget);
                self._showToolTip(triggerNode);
            }, 300);
        },
        &#x2F;**
         * tip的鼠标移出事件操作
         * @method _onMouseOut
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onMouseOut: function(e){
            var self = this;
            if (this._showTimeOut) {
                clearTimeout(this._showTimeOut);
            }
            this._hideTimeOut = setTimeout(function(){
                S.hideToolTip();
            }, 300);
            
        },
        &#x2F;**
         * el悬浮事件操作
         * @method _onElMouseOver
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onElMouseOver: function(e){
            if (this._hideTimeOut) {
                clearTimeout(this._hideTimeOut);
            }
        },
        &#x2F;**
         * el的鼠标移出事件操作
         * @method _onElMouseOut
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onElMouseOut: function(e){
            var self = this;
            this._hideTimeOut = setTimeout(function(){
                S.hideToolTip();
            }, 300);
        },
        &#x2F;**
         * 销毁Tip组件
         * @method destroy
         *&#x2F;
        destroy: function(){
            Widget.prototype.destroy.call(this);
            &#x2F;&#x2F;$(this.triggerNode).off();
            this.el.off().remove();
        }
        
    });
    
    S.bridgeTojQuery(&#x27;tooltip&#x27;, ToolTip);
    
    
    
    return ToolTip;
    
});


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<div class="foot">
		The API build by YUIDOC
		Simple UI is released under MIT License and implements open technologies such as:HTML5,CSS3,JavaScript.
		<p>
		如果你想为SimpleUI贡献代码，请点击这里<a target="_blank" href="http://github.com/simpleui">SimpleUI At Github</a>
		</p>
        <div class="blog-info">
         WordPress和<a href="http://simpleui.org" target="_blank">SimpleUI</a>强力驱动--蓝面小生--2012
		 <script src="http://s9.cnzz.com/stat.php?id=4424795&web_id=4424795&show=pic1" language="JavaScript"></script>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
