<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ui\menu.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.7.0&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    
	<link href="http://simpleui.org/wp-content/themes/simpleui/css/style.css" rel="stylesheet">
	<link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.7.0&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
<div class="navbar navbar-fixed-top">
     
        <div class="container navbar-inner">
            <h1 class="nav-title">
                <a href="http://simpleui.org/">Simple <span class="nav-title-em">UI</span></a>
				<p>Simple UI library for the web & make web build quickly</p>
            </h1>
           
           <!-- <div class="navbar-col" title="切换显示咧">
                <a class="navbar-col2-demo ib" title="两栏" rel="two" href="javascript:;">
                    
                </a>
                <a class="navbar-col3-demo ib" title="三栏" rel="three" href="javascript:;">
                    
                </a>
            </div> -->
            <div class="navbar-search">
                <form action="http://simpleui.org/" method="get" id="searchForm">
                        <input type="text" placeholder="请输入搜索的关键字" name="s"/><button type="submit"></button>
                </form>
                      
            </div>
        </div>
      
</div>
<div class="nav-menu-container">
 <ul class="nav-menu"><li id="menu-item-10" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-10"><a href="http://simpleui.org/category/guides/">指南</a></li>
<li id="menu-item-11" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-11 current_page_item"><a href="http://simpleui.org/api">文档</a></li>
<li id="menu-item-51" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-51"><a href="http://simpleui.org/deploy">部署</a></li>
<li id="menu-item-50" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-50"><a href="http://simpleui.org/download">下载</a></li>
<li id="menu-item-52" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-52"><a href="http://simpleui.org/about">关于</a></li>
</ul> </div> 
	<div class="container">
    <div id="bd" class="yui3-g">
        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Simple.Attribute.html">Simple.Attribute</a></li>
            
                <li><a href="..&#x2F;classes/Simple.AutoComplete.html">Simple.AutoComplete</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Button.html">Simple.Button</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ButtonGroup.html">Simple.ButtonGroup</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ComboButton.html">Simple.ComboButton</a></li>
            
                <li><a href="..&#x2F;classes/Simple.ContextMenu.html">Simple.ContextMenu</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DatePicker.html">Simple.DatePicker</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DatePickerBase.html">Simple.DatePickerBase</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Dialog.html">Simple.Dialog</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Drag.html">Simple.Drag</a></li>
            
                <li><a href="..&#x2F;classes/Simple.DropDownButton.html">Simple.DropDownButton</a></li>
            
                <li><a href="..&#x2F;classes/Simple.EventTarget.html">Simple.EventTarget</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Menu.html">Simple.Menu</a></li>
            
                <li><a href="..&#x2F;classes/Simple.MenuItem.html">Simple.MenuItem</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Modal.html">Simple.Modal</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Pagination.html">Simple.Pagination</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Resize.html">Simple.Resize</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Selectable.html">Simple.Selectable</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Tip.html">Simple.Tip</a></li>
            
                <li><a href="..&#x2F;classes/Simple.TipBase.html">Simple.TipBase</a></li>
            
                <li><a href="..&#x2F;classes/Simple.Widget.html">Simple.Widget</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/attribute.html">attribute</a></li>
            
                <li><a href="..&#x2F;modules/declare.html">declare</a></li>
            
                <li><a href="..&#x2F;modules/event.html">event</a></li>
            
                <li><a href="..&#x2F;modules/ui.auto-complete.html">ui.auto-complete</a></li>
            
                <li><a href="..&#x2F;modules/ui.button.html">ui.button</a></li>
            
                <li><a href="..&#x2F;modules/ui.button-group.html">ui.button-group</a></li>
            
                <li><a href="..&#x2F;modules/ui.date-picker.html">ui.date-picker</a></li>
            
                <li><a href="..&#x2F;modules/ui.dialog.html">ui.dialog</a></li>
            
                <li><a href="..&#x2F;modules/ui.drag.html">ui.drag</a></li>
            
                <li><a href="..&#x2F;modules/ui.menu.html">ui.menu</a></li>
            
                <li><a href="..&#x2F;modules/ui.modal.html">ui.modal</a></li>
            
                <li><a href="..&#x2F;modules/ui.pagination.html">ui.pagination</a></li>
            
                <li><a href="..&#x2F;modules/ui.resize.html">ui.resize</a></li>
            
                <li><a href="..&#x2F;modules/ui.selectable.html">ui.selectable</a></li>
            
                <li><a href="..&#x2F;modules/ui.tool-tip.html">ui.tool-tip</a></li>
            
                <li><a href="..&#x2F;modules/widget.html">widget</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ui\menu.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([&#x27;simple&#x27;, &#x27;widget&#x27;, &#x27;declare&#x27;, &#x27;css!css&#x2F;menu&#x27;], function(S, Widget, declare, css){

    var $ = S.$, MenuItem, Menu,_menuInc=[];
    
    &#x2F;**
     * 渲染每个菜单项
     * @class Simple.MenuItem
     * @extends Simple.Widget
     * @protected
     *&#x2F;
    MenuItem = declare(&#x27;MenuItem&#x27;, Widget, {
        &#x2F;**
         * 指定生成的容器的tagName
         * @property tagName
         * @type String
         * @default ul
         *&#x2F;
        tagName: &#x27;ul&#x27;,
        &#x2F;**
         * 指定每个Item的文字
         * @property label
         * @type String
         * @default simple-menu
         *&#x2F;
        label: &#x27;simple-menu&#x27;,
        &#x2F;**
         * 指定每个Item的图标
         * @property icon
         * @type String
         *&#x2F;
        icon: &#x27;&#x27;,
        &#x2F;**
         * 该菜单项的帮助信息
         * @property helper
         * @type String
         *&#x2F;
        helper: &#x27;&#x27;,
        &#x2F;**
         * 跳转的链接地址
         * @property url
         * @type String
         *&#x2F;
        url: &#x27;&#x27;,
        &#x2F;**
         * 该菜单项是否被禁用
         * @property disabled
         * @type Boolean
         * @default false
         *&#x2F;
        disabled: false,
        &#x2F;**
         * 该菜单项是否被选中
         * @property checked
         * @type Boolean
         * @default false
         *&#x2F;
        checked: false,
        &#x2F;**
         * 该菜单项的点击事件
         * @property handle
         * @type Function
         *&#x2F;
        handle: $.noop,
        &#x2F;**
         * 生成该菜单的模版
         * @property template
         * @type String
         *&#x2F;
        template: &#x27;&lt;li class=&quot;simple-menu-item&quot;&gt;&#x27;+
	&#x27;&lt;a class=&quot;simple-menu-node&quot; widgetpoint=&quot;menuNode&quot;&gt; &#x27;+
		&#x27;&lt;span widgetpoint=&quot;menuLabel&quot;&gt;&lt;&#x2F;span&gt; &#x27;+
	&#x27;&lt;em widgetpoint=&quot;menuHelper&quot;&gt;&lt;&#x2F;em&gt; &#x27;+
	&#x27;&lt;&#x2F;a&gt;&#x27;+
&#x27;&lt;&#x2F;li&gt;&#x27;,
        
        &#x2F;**
         * 渲染该菜单项
         * @method renderUI
         *&#x2F;
        renderUI: function(){
        
            this.set(&#x27;label&#x27;, this.label);
            this.set(&#x27;disabled&#x27;, this.disabled);
            this.set(&#x27;helper&#x27;, this.helper);
            this.set(&#x27;checked&#x27;, this.checked);
            this.set(&#x27;url&#x27;, this.url);
            
        },
        &#x2F;**
         * 为该菜单项绑定事件
         * @method bindUI
         *&#x2F;
        bindUI: function(){
            this.el.on({
                &#x27;click&#x27;: $.proxy(this._onclick, this),
                &#x27;mouseover&#x27;: $.proxy(this._onmouseover, this),
                &#x27;mouseout&#x27;: $.proxy(this._onmouseout, this)
            })
        },
        &#x2F;**
         * 点击事件操作
         * @method _onclick
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onclick: function(e){
            this.handle.call(this, e);
        },
        &#x2F;**
         * 悬浮事件操作
         * @method _onmouseover
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onmouseover: function(e){
            this.el.addClass(&#x27;simple-menu-item-hover&#x27;);
        },
        &#x2F;**
         * 移出事件操作
         * @method _onmouseout
         * @param e {Event} jQuery包装的Event
         * @protected
         *&#x2F;
        _onmouseout: function(e){
            this.el.removeClass(&#x27;simple-menu-item-hover&#x27;);
        },
        &#x2F;**
         * 渲染菜单项的文字
         * @method _setterFocus
         * @param label {String} 文字
         * @protected
         * @return label
         *&#x2F;
        _setterLabel: function(label){
            this.menuLabel.html(label);
            return label;
        },
        &#x2F;**
         * 渲染菜单是否禁用
         * @method _setterDisabled
         * @param disabled {Boolean} 是否禁用该菜单
         * @protected
         * @return disabled
         *&#x2F;
        _setterDisabled: function(disabled){
            this.el[(disabled ? &#x27;addClass&#x27; : &#x27;removeClass&#x27;)](&#x27;simple-menu-disabled&#x27;);
            return disabled;
        },
        &#x2F;**
         * 渲染菜单的帮助信息
         * @method _setterHelper
         * @param helper {String} 帮助信息
         * @protected
         * @return helper
         *&#x2F;
        _setterHelper: function(helper){
            this.menuHelper.html(helper);
            return helper;
        },
        &#x2F;**
         * 渲染菜单是否被选中
         * @method _setterChecked
         * @param checked {Boolean} 菜单项是否被选中
         * @protected
         * @return checked
         *&#x2F;
        _setterChecked: function(checked){
            this.el[(checked ? &#x27;addClass&#x27; : &#x27;removeClass&#x27;)](&#x27;simple-menu-checked&#x27;);
            return checked;
        },
        &#x2F;**
         * 渲染菜单的链接
         * @method _setterUrl
         * @param url {String} 菜单的链接
         * @protected
         * @return url
         *&#x2F;
        _setterUrl: function(url){
            if (url) {
                this.menuNode.attr(&#x27;href&#x27;, url);
            }
            return url;
        }
    });
    &#x2F;**
     * Menu用于模拟点击桌面图标出现的菜单条目，继承于Widget类，同样Menu可以选择延迟渲染还是声明即渲染.
     * 
     *     require([&#x27;ui&#x2F;menu&#x27;],function(){
     *         new Menu({
     *             items:[{label:&#x27;simple-menu&#x27;}]
     *         });
     *     });
     *     
     * @module ui.menu
     * @class Simple.Menu
     * @extends Simple.Widget
     *&#x2F;
    Menu = declare(&#x27;Menu&#x27;, Widget, {
        &#x2F;**
         * 指定触发菜单显示的节点
         * @property node
         * @type String
         *&#x2F;
        node: &#x27;&#x27;,
        &#x2F;**
         * 指定渲染菜单的数据
         * @property items
         * @type Array
         *&#x2F;
        items: [],
        &#x2F;**
         * 指定渲染菜单的父级模版
         * @property  items
         * @type String
         * @protected
         *&#x2F;
        template: &#x27;&lt;div class=&quot;simple-menu&quot;&gt;&lt;&#x2F;div&gt;&#x27;,
        &#x2F;**
         * 私有属性判断是否有父级菜单
         * @property  _hasParentMenu
         * @type Boolean
         * @private
         *&#x2F;
        _hasParentMenu: false,
        &#x2F;**
         * 初始化一些属性，用来存储需要的数据
         * @method initAttrs
         *&#x2F;
        initAttrs: function(){
            _menuInc.push(this);
            this._menuItemInc = [];
            &#x2F;&#x2F;存储有子菜单的节点
            this._menuItemsHasChilds = [];
        },
        initBaseEvents:function(){
             this._bindNode();  
        },
        &#x2F;**
         * 渲染该菜單
         * @method renderUI
         * @protected
         *&#x2F;
        renderUI: function(){
        
            var items = this.get(&#x27;items&#x27;);
            
            this._parseItems(items);
            
            this.hide();
        },
        &#x2F;**
         * 渲染该菜單
         * @method _parseItems
         * @param items {Array} 每个菜单项的数据
         * @private
         *&#x2F;
        _parseItems: function(items){
            if (S.isArray(items) &amp;&amp; items.length) {
                if (typeof items[0].title === &#x27;string&#x27; || items[0].items) {
                    this._parseItemsByGroup(items);
                }
                else 
                    if (typeof items[0].label === &#x27;string&#x27;) {
                        this._parseItemsBySingle(items);
                    }
                    else {
                        throw new Error(&#x27;不能识别的数据格式！&#x27;);
                    }
            }
            else {
                throw new Error(&#x27;不能识别的数据格式！&#x27;);
            }
        },
        &#x2F;**
         * 通过菜单组渲染该菜单
         * @method _parseItemsByGroup
         * @param items {Array} 每个菜单项的数据
         * @private
         *&#x2F;
        _parseItemsByGroup: function(items){
            S.each(items, function(item, index){
                &#x2F;&#x2F;存在标题
                if (item.title) {
                    this.el.append(&#x27;&lt;h3 class=&quot;simple-menu-title&quot;&gt;&#x27; + item.title + &#x27;&lt;&#x2F;h3&gt;&#x27;);
                }
                &#x2F;&#x2F;菜单项
                if (item.items &amp;&amp; item.items.length) {
                    this._parseItemsBySingle(item.items);
                }
                
            }, this);
        },
        &#x2F;**
         * 通过单个菜单渲染该菜单
         * @method _parseItemsBySingle
         * @param items {Array} 每个菜单项的数据
         * @private
         *&#x2F;
        _parseItemsBySingle: function(items){
            var childContainer = $(&#x27;&lt;ul class=&quot;simple-menu-content&quot;&#x2F;&gt;&#x27;).appendTo(this.el);
            S.each(items, function(item, index){
                var menuItemInc = new MenuItem(S.mixin(item, {
                    container: childContainer
                }));
                if (item.childs) {
                    menuItemInc.menuNode.addClass(&#x27;simple-menu-hassub&#x27;);
                    var menuInc = new Menu({
                        items: item.childs,
                        container: menuItemInc.el,
                        _hasParentMenu: true
                    });
                    menuInc.hide();
                    this._menuItemsHasChilds.push({
                        inc: menuInc,
                        el: menuItemInc.el
                    });
                }
                this._menuItemInc.push(menuItemInc);
            }, this);
        },
        &#x2F;**
         * 为已有的菜单增加数据
         * @method addChild
         * @param items {Array} 每个菜单项的数据
         * @public
         *&#x2F;
        addChild: function(items){
            this._parseItems(items);
        },
        &#x2F;**
         * 获取菜单中的菜单项
         * @method getItem
         * @param index {Int} 菜单项的序列
         *&#x2F;
        getItem:function(index){
            return this._menuItemInc[index];
        },
        &#x2F;**
         * 为该菜单绑定事件
         * @method bindUI
         * @protected
         *&#x2F;
        bindUI: function(){
            var self = this;
            S.each(this._menuItemsHasChilds, function(menuItem){
                &#x2F;&#x2F;延迟显示菜单
                var showTimeout, hideTimeout;
                menuItem.el.on(&#x27;mouseenter&#x27;, function(){
                    showTimeout = setTimeout(function(){
                        menuItem.inc.show();
                    }, 200);
                    
                });
                menuItem.el.on(&#x27;mouseleave&#x27;, function(){
                    showTimeout &amp;&amp; clearTimeout(showTimeout);
                    hideTimeout = setTimeout(function(){
                        menuItem.inc.hide();
                    }, 200);
                });
                
            }, this);
            
            &#x2F;&#x2F;点击其他区域该菜单消失
            $(document).on(&#x27;click&#x27;, function(){
                self.hide();
            });
            
           &#x2F;&#x2F; this._bindNode();
        },
        
        _bindNode: function(){
            var self = this;
            &#x2F;&#x2F;为触发该菜单的node绑定事件
            this.node.each(function(index, node){
                $(node).on(&#x27;click&#x27;, function(e){
                    S.each(_menuInc,function(menuInc){
                       menuInc.el &amp;&amp; menuInc.el.hide(); 
                    });
                    self.showAt($(node));
                    return false;
                });
            });
        },
        show:function(){
             this.inherit(arguments);
             this.fixPosition();
        },
		&#x2F;**
         * 隐藏该菜单
         * @method hide
         *&#x2F;
        hide: function(){
                this.inherit(arguments);
                if (this._hasParentMenu) {
                    this.el.css({
                        &#x27;left&#x27;: &#x27;100%&#x27;,
                        &#x27;top&#x27;: 0,
                        &#x27;bottom&#x27;: &#x27;auto&#x27;,
                        &#x27;right&#x27;: &#x27;auto&#x27;
                    });
                }
                else {
                    this.el.css({
                        &#x27;bottom&#x27;: &#x27;auto&#x27;,
                        &#x27;right&#x27;: &#x27;auto&#x27;
                    });
                }
        },
        &#x2F;**
         * 菜单显示相对node位置
         * @param node {jQuery Object} 相对的参考节点
         * @method showAt
         *&#x2F;
        showAt: function(node){
            this.show();
            this.el.css({
                left: node.offset().left,
                top: node.offset().top + node[0].offsetHeight
            });
            
            this.fixPosition();
        },
        &#x2F;**
         * 调整菜单显示的位置
         * @method fixPosition
         *&#x2F;
        fixPosition: function(){
            &#x2F;&#x2F;如果水平放不下
            if (!S.isFitHorizontal(this.el)) {
                this.el.css({
                    &#x27;left&#x27;: &#x27;auto&#x27;,
                    right: this.el.width()
                });
            }
            &#x2F;&#x2F;如果垂直放不下
            if (!S.isFitVertical(this.el)) {
                this.el.css({
                    &#x27;top&#x27;: &#x27;auto&#x27;,
                    bottom: 0
                });
            }
        },
		&#x2F;**
		 * 销毁该菜单
		 * @method destroy
		 *&#x2F;
		destroy:function(){
			S.each(this._menuItemsHasChilds,function(menuItem){
				menuItem.off();
			});
			this._menuItemsHasChilds = null;
			this.inherit(arguments);
		}
    });
    &#x2F;**
     * ContextMenu用于模拟右击桌面图标出现的上下文菜单，继承自Simple.Menu
     *     
     *     require([&#x27;ui&#x2F;menu&#x27;],function(){
     *         new Simple.ContextMenu({
     *            node:&#x27;#context-menu&#x27;,
     *            items:[{label:&#x27;simple-menu&#x27;}]
     *         });
     *     });
     *     
     * @class Simple.ContextMenu
     * @extends Simple.Menu
     *&#x2F;
    ContextMenu = declare(&#x27;ContextMenu&#x27;, Menu, {
    
        _bindNode: function(){
            var self = this;
            this.node.each(function(index, node){
                $(node).on(&#x27;contextmenu&#x27;, function(e){
                    self.showAt($(node), e);
                    return false;
                });
            });
        },
        &#x2F;**
         * 右键菜单显示的位置
         * @param node {jQuery Object} 相对的参考节点
         * @param e {jQuery Event} 传入的jQuery包装的Event对象
         * @method showAt
         *&#x2F;
        showAt: function(node, e){
            this.show();
            this.el.css({
                left: e.pageX,
                top: e.pageY
            });
            
            this.fixPosition();
        }
    });
    
    S.bridgeTojQuery(&quot;contextmenu&quot;, ContextMenu);
    S.bridgeTojQuery(&quot;menu&quot;, Menu);
    
    return Menu;
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<div class="foot">
		The API build by YUIDOC
		Simple UI is released under MIT License and implements open technologies such as:HTML5,CSS3,JavaScript.
		<p>
		如果你想为SimpleUI贡献代码，请点击这里<a target="_blank" href="http://github.com/simpleui">SimpleUI At Github</a>
		</p>
        <div class="blog-info">
         WordPress和<a href="http://simpleui.org" target="_blank">SimpleUI</a>强力驱动--蓝面小生--2012
		 <script src="http://s9.cnzz.com/stat.php?id=4424795&web_id=4424795&show=pic1" language="JavaScript"></script>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
